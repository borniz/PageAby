import{l as E,o as q,r as g}from"./chunk-3763RJWU.js";import{Cb as e,Db as i,Eb as x,Gb as v,Ha as y,Kb as O,Lb as P,Ob as M,Va as C,Wb as a,Xb as l,Za as o,_a as S,a as h,bc as w,ec as d,fc as m,ia as f,ob as _,ra as b,sa as u,sb as I}from"./chunk-LCETTJD3.js";function D(c,n){if(c&1){let t=v();e(0,"tr")(1,"th",11),a(2),i(),e(3,"td",3),x(4,"img",12),i(),e(5,"td"),a(6),i(),e(7,"td"),a(8),i(),e(9,"td"),a(10),i(),e(11,"td"),a(12),d(13,"currency"),i(),e(14,"td"),a(15),d(16,"currency"),i(),e(17,"td")(18,"button",13),O("click",function(){let s=b(t).$implicit,p=P();return u(p.deleteItemCart(s.id))}),x(19,"img",14),i()()()}if(c&2){let t=n.$implicit,r=n.index;o(2),l(r+1),o(2),M("src",t.image,C),o(2),l(t.name),o(2),l(t.description),o(2),l(t.quantity),o(2),l(m(13,7,t.base_price)),o(3),l(m(16,9,t.quantity*t.base_price))}}var j=class c{constructor(n){this.platformId=n}apiservices=[];ngOnInit(){if(g(this.platformId)){let n=localStorage.getItem("cart"),t=n?JSON.parse(n):[];this.apiservices=this.mergeDuplicates(t),localStorage.setItem("cart",JSON.stringify(this.apiservices))}}mergeDuplicates(n){let t=new Map;for(let r of n){let s=String(r.id),p=t.get(s);p?p.quantity=(p.quantity||0)+(r.quantity||0):t.set(s,h({},r))}return Array.from(t.values())}addToCart(n){let t=this.apiservices.findIndex(r=>r.id===n.id);t!==-1?this.apiservices[t].quantity+=n.quantity:this.apiservices.push(h({},n)),g(this.platformId)&&localStorage.setItem("cart",JSON.stringify(this.apiservices))}deleteItemCart(n){this.apiservices=this.apiservices.filter(t=>t.id!==n),g(this.platformId)&&localStorage.setItem("cart",JSON.stringify(this.apiservices))}getTotal(){return this.apiservices.reduce((n,t)=>n+t.quantity*t.base_price,0)}static \u0275fac=function(t){return new(t||c)(S(y))};static \u0275cmp=f({type:c,selectors:[["app-shopping-cart"]],standalone:!0,features:[w],decls:30,vars:4,consts:[[1,"container"],[1,"table"],[1,"table-items-id"],[1,"table-items-img"],[1,"table-items-name"],[1,"table-item-description"],[1,"table-items-quanty"],[1,"table-items-price"],[1,"table-items-total"],[4,"ngFor","ngForOf"],[1,"table-totalprice"],["scope","row"],["alt","Imagen del producto","width","60px","height","80px",3,"src"],[1,"btn-shoppingDelete",3,"click"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT5Da53yOGNjPvAG2A2wxUX5nPiqxGCEUyYZg&s","alt","Eliminar","width","20px","height","20px"]],template:function(t,r){t&1&&(e(0,"div",0)(1,"h1"),a(2,"Carrito de Compras"),i(),e(3,"table",1)(4,"thead")(5,"tr")(6,"th",2),a(7,"#"),i(),e(8,"th",3),a(9,"Imagen"),i(),e(10,"th",4),a(11,"Nombre"),i(),e(12,"th",5),a(13,"Descripci\xF3n"),i(),e(14,"th",6),a(15,"Cantidad"),i(),e(16,"th",7),a(17,"Precio Unitario"),i(),e(18,"th",8),a(19,"Valor Total"),i(),e(20,"th"),a(21,"Eliminar"),i()()(),e(22,"tbody"),_(23,D,20,11,"tr",9),i()(),e(24,"div",10)(25,"th"),a(26,"Total:"),i(),e(27,"td"),a(28),d(29,"currency"),i()()()),t&2&&(o(23),I("ngForOf",r.apiservices),o(5),l(m(29,2,r.getTotal())))},dependencies:[q,E],styles:['body[_ngcontent-%COMP%]{font-family:"Goudy Bookletter 1911",serif;margin:0;padding:0;box-sizing:border-box}th[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;min-height:100vh;padding:20px}.table[_ngcontent-%COMP%]{width:90%;border-collapse:collapse;margin:1rem 0}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:10px;text-align:center}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:center;border-bottom:1px solid #ddd}.btn-shoppingDelete[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;width:4rem;height:4rem}.table-items-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;display:block;margin:auto}.table-totalprice[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:flex-end;padding:10px;background-color:#e2e2cc;font-weight:700}@media (max-width: 768px){.table[_ngcontent-%COMP%]{width:100%}thead[_ngcontent-%COMP%]{display:none}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:5px;border:none;display:flex;justify-content:space-between}.table-totalprice[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media (min-width: 769px) and (max-width: 1024px){.table[_ngcontent-%COMP%], .table-totalprice[_ngcontent-%COMP%]{width:85%}}']})};export{j as ShoppingCartComponent};
