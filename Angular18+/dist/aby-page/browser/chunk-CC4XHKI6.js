import{$ as k,aa as D,b as y,c as g,ca as j,e as E,ea as R,f as N,fa as A,ga as z,i as I,j as O,ja as W,k as q,ka as H,l as B,la as U,ma as J,n as T,na as K,o as L,oa as Q,p as G,pa as X,q as V}from"./chunk-CE2IZUKY.js";import"./chunk-Q64FFBLU.js";import{m as S,p as F}from"./chunk-3763RJWU.js";import{Cb as r,Db as t,Eb as d,Gb as M,Kb as P,Lb as f,Va as w,Wb as o,Za as l,_a as x,bc as b,ia as h,ob as m,ra as C,sa as v,sb as s,xb as p}from"./chunk-LCETTJD3.js";function Z(e,n){e&1&&(r(0,"div",2),d(1,"mat-spinner",3),r(2,"p",4),o(3,"Guardando ... Producto"),t()())}function $(e,n){e&1&&(r(0,"mat-error"),o(1,"El Nombre es requerido"),t())}function ee(e,n){if(e&1&&d(0,"img",22),e&2){let i=f(2);s("src",i.imagePreview,w)}}function te(e,n){e&1&&(r(0,"mat-error"),o(1,"La Descripci\xF3n es requerida"),t())}function ie(e,n){e&1&&(r(0,"mat-error"),o(1,"La Cantidad es Requerida"),t())}function ne(e,n){e&1&&(r(0,"mat-error"),o(1,"El Precio Base es Requerido"),t())}function re(e,n){e&1&&(r(0,"mat-error"),o(1,"Falta Llenar un Campo"),t())}function oe(e,n){e&1&&(r(0,"button",21)(1,"mat-icon"),o(2,"save"),t()())}function ae(e,n){if(e&1){let i=M();r(0,"div",5)(1,"div",6)(2,"h3"),o(3,"A\xF1ade un Nuevo Producto"),t()(),r(4,"form",7),P("ngSubmit",function(){C(i);let u=f();return v(u.save())}),r(5,"div",8)(6,"mat-form-field",9)(7,"mat-label"),o(8,"Nombre"),t(),d(9,"input",10),m(10,$,2,0,"mat-error"),t(),m(11,ee,1,1,"img",11),t(),r(12,"div",12)(13,"mat-form-field",13)(14,"mat-label"),o(15,"Descripci\xF3n"),t(),d(16,"input",14),m(17,te,2,0,"mat-error"),t(),r(18,"input",15),P("change",function(u){C(i);let _=f();return v(_.onFileSelect(u))}),t()(),r(19,"div",16)(20,"mat-form-field",17)(21,"mat-label"),o(22,"Cantidad"),t(),d(23,"input",18),m(24,ie,2,0,"mat-error"),t()(),r(25,"div",16)(26,"mat-form-field",19)(27,"mat-label"),o(28,"Precio Base"),t(),d(29,"input",20),m(30,ne,2,0,"mat-error"),t()(),r(31,"div"),m(32,re,2,0,"mat-error")(33,oe,3,0,"button",21),t()()()}if(e&2){let i,a,u,_,c=f();l(4),s("formGroup",c.products),l(6),p((i=c.products.get("name"))!=null&&i.hasError("required")?10:-1),l(),s("ngIf",c.imagePreview),l(6),p((a=c.products.get("description"))!=null&&a.hasError("required")?17:-1),l(7),p((u=c.products.get("stock"))!=null&&u.hasError("required")?24:-1),l(6),p((_=c.products.get("base_price"))!=null&&_.hasError("required")?30:-1),l(2),p(c.products.invalid?32:33)}}var Y=class e{constructor(n,i){this.formBuilder=n;this.productService=i;this.products=this.formBuilder.group({name:["",[g.required]],description:["",[g.required]],stock:["",[g.required]],base_price:["",[g.required]]})}isLoading=!1;imagePreview=null;selectFile=null;products;value="";onFileSelect(n){let i=n.target;if(i.files&&i.files.length>0){this.selectFile=i.files[0];let a=new FileReader;a.onload=()=>{this.imagePreview=a.result},a.readAsDataURL(this.selectFile)}}save(){this.products.valid||alert("Faltan algunos Campos"),this.isLoading=!0,this.productService.createProduct(this.products.value).subscribe({next:n=>{this.selectFile&&n.id&&this.productService.uploadImage(this.selectFile,n.id).subscribe({next:()=>{alert("Producto Guardado Correctament"),alert("Imagen Subida Correctamente"),window.location.reload()},error:i=>{console.error("Error al Subir la Imagen",i),this.isLoading=!1}})},error:n=>{console.error("Error al Guardar el Producto",n),alert("Hubo un Error al Guardar Producto"),this.isLoading=!1}})}static \u0275fac=function(i){return new(i||e)(x(L),x(U))};static \u0275cmp=h({type:e,selectors:[["app-new-product"]],standalone:!0,features:[b],decls:2,vars:2,consts:[["class","spinner",4,"ngIf"],["class","fomrContainer",4,"ngIf"],[1,"spinner"],[1,"custom-spinner"],[1,"txtloading"],[1,"fomrContainer"],[1,"titleContainer"],[1,"formProduct",3,"ngSubmit","formGroup"],[1,"nameimgContainer"],["appearance","fill","id","name",1,"fullWidth"],["matInput","","placeholder","Nombre Producto","formControlName","name","required",""],["class","imagePreview",3,"src",4,"ngIf"],[1,"descSelectContainer"],["appearance","fill",1,"fullWidth"],["matInput","","type","text-area","placeholder","Descripci\xF3n del Producto","formControlName","description","required",""],["type","file",1,"selectFile",3,"change"],[1,"row"],["appearance","fill",1,"quantityInput"],["matInput","","type","number","placeholder","Cantidad","formControlName","stock","required",""],["appearance","fill",1,"preciBaseInput"],["matInput","","type","number","placeholder","Precio Base","formControlName","base_price","required",""],["type","submit","mat-fab",""],[1,"imagePreview",3,"src"]],template:function(i,a){i&1&&m(0,Z,4,0,"div",0)(1,ae,34,7,"div",1),i&2&&(s("ngIf",a.isLoading),l(),s("ngIf",!a.isLoading))},dependencies:[H,W,A,z,K,J,D,k,R,j,X,Q,V,I,y,O,E,N,T,q,B,G,F,S],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;width:100%}.spinner[_ngcontent-%COMP%]{position:absolute;z-index:1000;top:50vh;width:40%;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#faebd7}.custom-spinner[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #198754}.txtloading[_ngcontent-%COMP%]{background:linear-gradient(45deg,#105837,#00f);background-clip:text;color:transparent;background-size:400%,400%;animation:_ngcontent-%COMP%_loading 2s ease infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:0%}to{background-position:100%}}.formContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column}.titleContainer[_ngcontent-%COMP%]{width:100vw;height:auto;margin-top:5vh;justify-items:center}h3[_ngcontent-%COMP%]{font-family:serif}.formProduct[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:50%;margin:auto;padding:20px;gap:20px}.fullWidth[_ngcontent-%COMP%]{width:90%;max-width:250px}.quantityInput[_ngcontent-%COMP%], .preciBaseInput[_ngcontent-%COMP%]{width:100%;max-width:280px;margin-right:24vw}.row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;gap:20px}.nameimgContainer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin-left:1vw;margin-top:1vh}.imagePreview[_ngcontent-%COMP%]{margin-top:5vh;width:220px;height:120px;margin-left:1rem;border-radius:10px}.descSelectContainer[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:1.5vw;width:100%}.selectFile[_ngcontent-%COMP%]{margin-left:20px}@media (max-width: 768px){.formProduct[_ngcontent-%COMP%]{max-width:90%}.nameimgContainer[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.descSelectContainer[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:center}.titleContainer[_ngcontent-%COMP%]{align-items:center}h3[_ngcontent-%COMP%]{font-size:2rem}.fullWidth[_ngcontent-%COMP%]{width:90%;max-width:250px}.quantityInput[_ngcontent-%COMP%], .preciBaseInput[_ngcontent-%COMP%]{margin-left:25vw}.selectFile[_ngcontent-%COMP%]{margin-left:4rem;margin-bottom:2rem}.imagePreview[_ngcontent-%COMP%]{margin-top:10px}}"]})};export{Y as NewProductComponent};
